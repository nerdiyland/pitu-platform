RecipeFormatVersion: 2020-01-25
ComponentName: com.vanlance.vehicle-components.InternetConnectionEnsurer
componentVersion: <COMPONENT_VERSION>
ComponentDescription: "Infotainment user interface installed on Pitu Caleya"
ComponentPublisher: Vanlance
ComponentDependencies:
  com.vanlance.vehicle-components.RouterTwin:
    VersionRequirement: "<COMPONENT_VERSION>"
    DependencyType: HARD
ComponentConfiguration:
  DefaultConfiguration:
    accessControl:
      aws.greengrass.ipc.pubsub:
        'com.vanlance.vehicle-components.InternetConnectionEnsurer:pubsub:1':
          policyDescription: 'Allows access to shadow pubsub topics'
          operations:
            - 'aws.greengrass#PublishToTopic'
          resources:
            - pitu/router/telemetry
Manifests:
- Platform:
    os: /linux/
  Lifecycle:
    Run: |-
      python3 -m venv ./venv
      ./venv/bin/python3 -m pip install requests
      ./venv/bin/python3 -m pip install awsiotsdk
      ./venv/bin/python3 {com.vanlance.vehicle-components.RouterTwin:artifacts:decompressedPath}/router-twin/connection-ensurer.py
